版本: 1.0
作者: Gemini (產品經理)

# 核心使用者故事 (Core User Stories)

## 1. 裝置連線與 Web App 載入

**使用者故事**: As a 模型飛行愛好者, I want to 能輕鬆地將手機連線到 ESP32 的 Wi-Fi AP，並在瀏覽器中成功載入控制 Web App, so that 以便開始遙控我的航空模型。

**驗收標準**:
*   **Given**: 使用者的手機未連線至 ESP32 AP
*   **When**: 使用者開啟手機 Wi-Fi 並選擇 ESP32 建立的 AP 網路，然後在瀏覽器中輸入 `http://192.168.5.1`
*   **Then**: 手機成功連線到 ESP32 AP，並且 Web App 介面在瀏覽器中完整顯示，無錯誤訊息

## 2. 垂直方向舵機速度控制

**使用者故事**: As a 模型操作者, I want to 拖曳虛擬搖桿的垂直方向時，兩個舵機的回轉速度能即時且同步地變化, so that 以便精確控制模型的正反轉動力輸出。

**驗收標準**:
*   **Given**: 手機已成功連線至 Web App，且虛擬搖桿顯示在畫面中
*   **When**: 使用者向上拖曳虛擬搖桿，然後向下拖曳虛擬搖桿
*   **Then**: 連接在 GPIO 32 和 33 的兩個舵機的回轉速度即時同步加快，隨後即時同步減慢，且響應延遲低於 100 毫秒

## 3. 水平方向舵機差速轉向控制

**使用者故事**: As a 模型操作者, I want to 拖曳虛擬搖桿的水平方向時，兩個舵機的回轉速度能產生差異，實現模型轉向, so that 以便模擬航空模型的左右轉彎飛行姿態。

**驗收標準**:
*   **Given**: 手機已成功連線至 Web App，且虛擬搖桿顯示在畫面中
*   **When**: 使用者向左拖曳虛擬搖桿，然後向右拖曳虛擬搖桿
*   **Then**: 搖桿向左時，右舵機（GPIO 33）的速度加快而左舵機（GPIO 32）的速度減慢；搖桿向右時，右舵機速度減慢而左舵機速度加快，且轉向效果明顯可感知

## 4. 自定義舵機角度幅度

**使用者故事**: As a 模型調整者, I want to 能夠透過 Web 介面設定舵機的最大轉動角度幅度, so that 以便根據不同模型或操控需求調整舵機的運動範圍。

**驗收標準**:
*   **Given**: Web App 介面已載入，且提供舵機角度幅度設定區域
*   **When**: 使用者在設定區域輸入一個有效的角度值（例如：90），並點擊儲存
*   **Then**: 舵機的最大轉動角度幅度被更新為 90 度，且下次操作時舵機不會超出此範圍

## 5. 連線狀態與錯誤回饋

**使用者故事**: As a 問題診斷者, I want to 在 Web App 介面中能清楚看到目前的連線狀態，並在發生問題時收到有效的錯誤提示, so that 以便及時了解系統狀況並排除連線或操作問題。

**驗收標準**:
*   **Given**: Web App 正常運作
*   **When**: ESP32 與手機的 Wi-Fi 連線中斷
*   **Then**: Web App 介面會顯示「連線已中斷」的明確提示訊息

# 使用者流程圖 (User Flow Diagram)

```mermaid
graph TD
    A[使用者手機未連線] --> B{連線至 ESP32 AP?};
    B -- Yes --> C[開啟手機瀏覽器];
    C --> D[輸入 http://192.168.5.1];
    D --> E{Web App 載入成功?};
    E -- Yes --> F[顯示搖桿控制介面];
    E -- No --> G[顯示錯誤訊息 (載入失敗)];
    F --> H[操作搖桿 (垂直方向)];
    H --> I{舵機垂直響應正常?};
    I -- Yes --> J[操作搖桿 (水平方向)];
    I -- No --> K[顯示錯誤訊息 (垂直控制異常)];
    J --> L{舵機水平響應正常?};
    L -- Yes --> M[完成首次互動];
    L -- No --> N[顯示錯誤訊息 (水平控制異常)];
    G --> M;
    K --> M;
    N --> M;
```

# 流程圖詳細說明

1.  **使用者手機未連線**: 這是使用者與 ESP32 互動的起點。**Why**: 透過明確起始狀態，確保團隊理解使用者初次使用時的預期情境，即裝置間的獨立性與首次連線的必要性。
2.  **連線至 ESP32 AP**: **Why**: ESP32 作為 AP 提供獨立網路環境，無需外部路由器，降低使用門檻，確保模型在任何地方都能被手機直接控制，提升行動性與便利性。
3.  **開啟手機瀏覽器**: **Why**: 利用 Web App 的跨平台特性，避免原生應用開發的複雜性，讓使用者無需安裝任何軟體即可快速啟動控制介面，符合輕量級與即時性的需求。
4.  **輸入 http://192.168.5.1**: **Why**: 固定且易記的 IP 地址簡化了存取流程，使用者無需記憶複雜的網域名稱，直接透過標準瀏覽器介面即可連線，降低學習成本。
5.  **Web App 載入**: **Why**: 這是將使用者介面呈現給使用者的關鍵步驟。**Why**: 這是將程式碼從 ESP32 Web Server 傳輸至使用者手機瀏覽器渲染的過程，確保控制介面的可用性。
6.  **顯示搖桿控制介面**: **Why**: 這是使用者能實際進行操控的核心介面。**Why**: 提供直觀的視覺化搖桿，模擬實體遙控器的操作手感，降低新使用者學習成本，提高操作體驗。
7.  **操作搖桿 (垂直方向)**: **Why**: 垂直方向搖桿控制舵機的正反轉速度，是實現模型動力控制的基礎。**Why**: 這是滿足使用者對模型「前進/後退」或「加速/減速」基本控制需求，直接關聯核心功能。
8.  **舵機垂直響應正常**: **Why**: 驗證舵機是否正確執行垂直方向的速度指令。**Why**: 確保使用者操作與模型動作的一致性，這是遙控系統可靠性的核心，任何延遲或錯誤都會影響操控體驗。
9.  **操作搖桿 (水平方向)**: **Why**: 水平方向搖桿控制兩個舵機的差速，實現模型的轉向功能。**Why**: 這是滿足使用者對模型「左右轉向」控制的進階需求，提升模型的操控靈活性和應用的廣度。
10. **舵機水平響應正常**: **Why**: 驗證舵機是否正確執行水平方向的差速指令。**Why**: 確保使用者預期的轉向操作能被模型正確解讀並執行，對於精確操控和避免誤操作至關重要。
11. **完成首次互動**: **Why**: 標誌著新使用者成功體驗了產品的核心價值。**Why**: 這是驗證整個系統端到端工作正常的最終確認，同時也為使用者帶來成就感，鼓勵持續使用。