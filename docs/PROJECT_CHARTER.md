# ESP32-butterfly-Controller 專案章程

**版本**: 1.0
**作者**: 產品策略顧問
**日期**: 2026年2月4日

## 專案願景 (Project Vision)

透過直覺、響應迅速的 Web 介面，將 ESP32 晶片轉化為模型遙控系統的核心，賦予航空模型愛好者和創客社群前所未有的控制精準度與靈活性，從而激發更多創新應用與個人化飛行體驗。

## 主要目標 (Goals)

1.  **在專案啟動後 8 週內，完成 Web App 核心控制模組（包含虛擬搖桿操作、舵機角度幅度設定功能）的開發與部署至 ESP32 晶片。屆時，使用者能透過手機瀏覽器成功連線至 ESP32 AP (192.168.5.1)，並能穩定、即時地控制連接至 GPIO 32 和 33 的兩個舵機進行正反轉及速度調整，且所有指定功能性測試案例通過率達 95% 以上。**
2.  **在核心功能首次部署後 4 週內，針對至少 20 位目標使用者進行 Web 介面體驗評估。目標是確保其中 80% 的受訪者在問卷中，對 Web 介面的「直觀易用性」及「舵機控制響應靈敏度」兩項指標給予「滿意」或「非常滿意」的評價（等同於 5 分制中的 4 分或以上）。**
3.  **在完成核心功能部署後，透過實測驗證，確保在至少 90% 的正常操作情境下，從手機 Web 介面發出搖桿指令到 ESP32 驅動舵機動作之間的端到端延遲時間，平均保持在 100 毫秒以下，以確保使用者獲得流暢、無感的即時控制體驗。**

## 成功衡量指標 (Success Metrics)

*   **針對目標 1**:
    *   Web App 核心功能（手機連線、虛擬搖桿操作、舵機正反轉、速度調整、角度幅度設定）的開發與部署完成度達到 100%。
    *   ESP32 作為 AP，其 Web 伺服器可透過 `http://192.168.5.1` 被手機瀏覽器成功存取與互動。
    *   程式碼通過單元測試與整合測試，功能性錯誤率低於 2%。
*   **針對目標 2**:
    *   透過使用者體驗問卷調查，至少 16 份（80%）問卷在「介面直觀性」、「操作易用性」及「舵機響應速度」等關鍵指標上獲得 4 分或以上（滿分 5 分）。
    *   在使用者測試過程中，操作錯誤率（例如：未能正確調整設定、指令未被執行）低於 5%。
*   **針對目標 3**:
    *   透過專業工具（如：網路封包分析器、高幀率錄影分析）測量，手機搖桿操作與舵機實際動作之間的平均延遲時間穩定保持在 100 毫秒以下。
    *   在連續操作 30 分鐘的情況下，系統能維持穩定運作，未出現斷線或控制卡頓現象。

## 專案範圍 (Scope)

### 範圍內 (In-Scope)

*   **ESP32 韌體開發**: 實現 Wi-Fi AP 模式、固定 IP (192.168.5.1) 設定、內建 Web Server。
*   **Web 應用程式**: 基於 HTML5、CSS3、JavaScript 開發的單頁應用程式 (SPA)，包含虛擬搖桿（支援上下左右拖曳），並能根據搖桿的水平位置實現差異化舵機控制，同時提供舵機角度幅度設定介面。
*   **通訊協議**: 採用 WebSockets 或其他低延遲協議，實現手機與 ESP32 之間的雙向即時通訊。
*   **舵機控制邏輯**: 讀取 Web 介面搖桿指令，將其轉換為兩個舵機（連接 GPIO 32 和 33）的 PWM 輸出信號，實現正反轉及依搖桿位置調整速度。
*   **相容性**: 支援 iOS Safari 及 Android Chrome 等主流手機瀏覽器。
*   **可設定性**: 允許使用者透過 Web 介面設定舵機轉動角度幅度。

### 範圍外 (Out-of-Scope)

*   **原生行動應用程式開發**: 不包含 iOS/Android 原生 APP 的開發。
*   **多 ESP32 協同工作**: 單一手機僅控制一個 ESP32 裝置。
*   **複雜控制模式**: 不包含多維度搖桿（例如：三軸以上）、按鈕組合、姿態感測器回饋等更複雜的飛行控制邏輯。
*   **使用者帳戶與雲端服務**: 不涉及使用者登入、數據儲存至雲端、遠端遙控等功能。
*   **非舵機類型的輸出控制**: 不支援除舵機外的其他類型裝置（如馬達、LED 等）控制。
*   **硬體設計與製造**: 不包含 ESP32 開發板、舵機等硬體本身的設計或生產。
*   **安全與加密**: 初步階段不涉及數據傳輸加密或存取安全機制。

## 核心功能 (Core Features)

*   **ESP32 Wi-Fi AP 啟動**: 將 ESP32 配置為接入點 (Access Point)，並設定固定 IP 地址 `192.168.5.1`。
*   **內建 Web 伺服器**: 在 ESP32 上運行輕量級 Web 伺服器，託管 Web App 介面檔案。
*   **響應式 Web UI**: 適用於手機瀏覽器，包含一個視覺化的虛擬搖桿，可支援上下及左右拖曳。
*   **即時通訊模組**: 透過 WebSockets 在手機 Web 介面與 ESP32 之間建立低延遲、雙向的數據通道。
*   **搖桿狀態傳輸**: 實時傳送虛擬搖桿的上下及左右位置數據至 ESP32。
*   **舵機控制輸出**: ESP32 接收搖桿數據，轉換為精確的 PWM 信號，驅動連接在 GPIO 32 和 33 的兩個舵機。
*   **速度比例調整 (垂直軸)**: 根據搖桿的上下位置，動態調整兩個舵機正轉與反轉之間往返的時間間隔，實現速度的無級變速（越往上越快，越往下越慢）。
*   **差速控制 (水平軸)**: 根據搖桿的左右位置，實現對兩個舵機的差速控制，以模擬轉向飛行。具體為：
    *   搖桿向左移動時，右舵機（GPIO 33）的反覆速度加快，左舵機（GPIO 32）的反覆速度變慢。
    *   搖桿向右移動時，右舵機（GPIO 33）的反覆速度變慢，左舵機（GPIO 32）的反覆速度加快。
*   **角度幅度設定**: 提供 Web 介面輸入框，允許使用者自定義舵機最大轉動角度幅度（例如：從 0-180 度範圍內設定）。
*   **錯誤處理與狀態顯示**: 基礎的連線狀態提示與錯誤訊息顯示。

## 初步假設與風險 (Assumptions & Risks)

### 初步假設 (Assumptions)

*   **ESP32 性能符合要求**: 假設 ESP32 晶片（如 ESP32-WROOM-32 系列）的處理能力、記憶體以及 Wi-Fi 模組性能足以支撐 Web Server、WebSocket 通訊與兩個舵機的實時控制，並達到預期的響應速度。
*   **Web 技術支援**: 假設主流手機瀏覽器對 HTML5、CSS3、JavaScript 和 WebSockets 的支援度良好且穩定，能順暢運行所開發的 Web App 介面。
*   **舵機通用性**: 假設市面上常用的小型舵機（如 SG90, MG90S 等）能與 ESP32 的 PWM 輸出兼容，並且能在所期望的頻率和精度下工作。
*   **使用者環境穩定**: 假設使用者在操作時，其手機與 ESP32 之間的 Wi-Fi 環境相對穩定，干擾較小。
*   **開發工具與函式庫可用性**: 假設 Arduino IDE 或 ESP-IDF 等開發環境，以及相關的 Wi-Fi、Web Server、舵機控制函式庫成熟穩定且易於使用。

### 潛在風險 (Risks)

*   **技術實現複雜度高**:
    *   **風險**: ESP32 同時處理 Web Server、WebSocket 通訊和精確舵機 PWM 控制可能面臨性能瓶頸，導致延遲超標或系統不穩定。
    *   **緩解措施**: 初期開發進行性能基準測試；採用輕量級 Web Server 框架；優化程式碼邏輯；考慮使用非同步處理；若必要，研究是否有性能更強的 ESP 系列晶片或搭配微控制器方案。
*   **Wi-Fi 連線穩定性與覆蓋範圍**:
    *   **風險**: ESP32 在 AP 模式下的 Wi-Fi 穩定性可能受環境干擾影響，導致手機與其失去連線，或訊號範圍有限。
    *   **緩解措施**: 在韌體中加入自動重連機制與連線狀態監控；在 Web 介面提供連線狀態指示；建議使用者在開闊、低干擾環境下使用；可考慮增加外接天線的設計（若硬體允許）。
*   **瀏覽器兼容性與效能差異**:
    *   **風險**: 由於不同手機型號及瀏覽器版本差異，Web App 的介面顯示、JavaScript 執行效能可能不一致，導致部分使用者體驗不佳。
    *   **緩解措施**: 遵循 Web 標準開發；在多種主流手機和瀏覽器上進行廣泛測試；對已知兼容性問題提供回溯方案或警示。
*   **舵機控制精度與響應極限**:
    *   **風險**: 舵機本身的物理限制（如反應速度、最小步進角度）或 ESP32 PWM 輸出的解析度可能無法達到所需的高精度和極低延遲控制。
    *   **緩解措施**: 選用高精度、響應快的數位舵機；仔細調校 PWM 頻率與佔空比參數；在設計階段明確與使用者溝通舵機的物理限制。
*   **開發人員資源與技能**:
    *   **風險**: 專案團隊可能缺乏 ESP32 韌體開發、嵌入式 Web Server、WebSockets 或前端 Web App 開發的複合型技能。
    *   **緩解措施**: 招募或培訓具備相關技能的開發人員；利用開源專案與社群資源；將任務細分，分配給不同領域的專長人員。
*   **控制混淆與使用者體驗**:
    *   **風險**: 引入左右轉向控制後，上下與左右控制的協調性，以及舵機差速邏輯的調校，可能導致控制邏輯複雜化，影響使用者對飛行姿態控制的直觀感受。
    *   **緩解措施**: 精心設計搖桿與舵機速度映射曲線；提供視覺化回饋以幫助使用者理解控制效果；進行多輪使用者測試以優化控制手感和易用性。